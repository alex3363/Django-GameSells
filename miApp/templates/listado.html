{% load static %} 
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Listado</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Open+Sans:wght@400;600&display=swap"
rel="stylesheet">
<link type="text/css" href="{% static 'css/estilo.css' %}" rel="stylesheet" />
<style>
    /* Estilos personalizados */ 
    body {
        background-color: #a31515b7; /* Color de fondo de la página */
    }

    .card {
        margin-bottom: 20px; /* Espacio entre las tarjetas */
        background-color: #3f4f63; /* Color de fondo de las tarjetas */
        border: 1px solid #6d0e0e; /* Borde de las tarjetas */
        border-radius: 8px; /* Borde redondeado de las tarjetas */
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1); /* Agrega un marco con sombra */
    }

    .card-title {
        color:#b7e904f3;
    }

    .card-text {
        color: #b7e904f3; /* Cambia el color del texto de los datos */
    }

    .title-bar-container {
        width: 100%; /* Ajusta el ancho del contenedor al 100% */
        background-color: #050505; /* Color de la barra */
        padding: 10px; /* Espacio alrededor del texto */
        border-radius: 8px; /* Borde redondeado de la barra */
        margin-bottom: 20px; /* Espacio debajo del título */
    }

    .title-text {
        font-family: 'Bebas Neue', cursive; /* Cambia la fuente del título */
        color: #0a0a0a; /* Color del título */
        background: linear-gradient(to right, #2f2f2f, #121212); /* Degradado para el título */
        -webkit-background-clip: text; /* Clip de fondo para que el degradado solo afecte al texto */
        -webkit-text-fill-color: #dadd19e7; /* Relleno de texto transparente para que el degradado se vea */
        position: relative; /* Posición relativa para el seudoelemento */
        text-align: right; /* Alinea el texto a la derecha */
    }

    /* Seudoelemento para agregar la línea */
    .title-text::after {
        content: ''; /* Contenido vacío */
        position: absolute; /* Posición absoluta para que esté sobre el texto */
        left: 0; /* Alinea al inicio */
        bottom: 0; /* Alinea al final */
        width: 100%; /* Ancho completo */
        height: 3px; /* Grosor de la línea */
        background-color: #ff0000; /* Color de la línea */
    }

    .container {
        background-color: #6d0e0e; /* Cambia este color al que desees */
        padding: 0px; /* Añade espacio alrededor de la tabla */
        border-radius: 6px; /* Opcional: Agrega bordes redondeados al contenedor */
    }

    .pagination-container {
    margin-top: 5px; /* Añade espacio sobre la paginación */
    margin-left: 5px; /* Margen izquierdo automático */
    margin-right: 5px; /* Margen derecho automático */
    text-align: center; /* Centra los elementos de la paginación */
}

    .pagination .page-link {
        color: #000000f3; /* Color del texto de los enlaces */
        background-color: #0d529c; /* Color de fondo de los enlaces */
        border: 1px solid #0d529c; /* Borde de los enlaces */
    }

    .pagination .page-link:hover {
        background-color: #0056b3; /* Cambia el color de fondo al pasar el ratón */
    }

    .pagination .page-item.active .page-link {
        background-color: #0056b3; /* Color de fondo del enlace activo */
        border-color: #0056b3; /* Color del borde del enlace activo */
    }

    .pagination .page-item.disabled .page-link {
        color: #6c757d; /* Color del texto de los enlaces desactivados */
        pointer-events: none; /* Desactiva los eventos de clic */
        background-color: transparent; /* Fondo transparente para los enlaces desactivados */
        border-color: transparent; /* Borde transparente para los enlaces desactivados */
    } 

    .navbar {
        background-color: #6d0e0e !important; /* Cambia el color del navbar */
    }

    .navbar-brand {
        color: #b7e904f3; /* Cambia el color del texto del navbar-brand */
        text-align: center; /* Centra el texto */
        flex-grow: 1; /* Hace que el texto ocupe todo el espacio disponible */ 
        font-size: 25px;
    }

    #fuente {
        color: #dadd19e7; /* Color deseado para "Inicio" */
        font-size: 25px; /* Tamaño de fuente deseado para "Inicio" */
        /* Agrega otros estilos como sea necesario */
    }

    .navbar-toggler {
        border-color: #6d0e0e; /* Cambia el color del borde del botón del navbar-toggler */
    }

    .nav-link {
        color: #dadd19e7!important; /* Cambia el color del texto de los enlaces del navbar */
    }

    .navbar-text {
        color:  #dadd19e7; /* Color del nuevo texto */
        margin-right: 1px; /* Margen derecho */
        text-align: center; /* Centra el texto */
    }

    .brand-text {
        color: #b7e904f3; /* Cambia el color del texto "Enciclopedia de Juegos" */
    }
    
</style>
</head>
<body>
    <div class="title-bar-container">
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="#" style="color: #dadd19e7;">Enciclopedia de Juegos</a> <!-- Texto centrado -->
                <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'index' %}">Inicio</a>
                        </li>
                    </ul> 
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
    </nav>
</div>


<div class="container">
    <div class="row" id="Games"></div>
    <div class="pagination-container">
        <ul class="pagination" id="pagination"></ul>
    </div>
</div>

<script async src="https://cdn.jsdelivr.net/npm/es-module-shims@1/dist/es-module-shims.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha512-3gJwYpMe3QewGELv8k/BX9vcqhryRdzRMxVfq6ngyWXwo03GFEzjsUm8Q7RZcHPHksttq7/GFoxjCVUjkjvPdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    $(document).ready(function() {
        const API_KEY = 'cc8b1ee3c2ec4034a3dbd68c5d33db6f';
        const PAGE_SIZE = 40;
        const URL = `https://api.rawg.io/api/games?key=${API_KEY}&page_size=${PAGE_SIZE}`;

        var id_Games = $("#Games");
        var pagination = $("#pagination");

        function addGames(juego) {
    // Obtener los nombres de los géneros como una cadena separada por comas
    const genres = juego.genres.map(genre => genre.name).join(', ');

    // Obtener los nombres de las plataformas como una cadena separada por comas
    const platforms = juego.platforms.map(platform => platform.platform.name).join(', ');

    id_Games.append(`
        <div class="col-md-4">
            <div class="card h-100">
                <img src="${juego.background_image}" class="card-img-top" alt="...">
                <div class="card-body">
                    <h5 class="card-title">${juego.name}</h5>
                    <p class="card-text">Fecha de lanzamiento: ${juego.released}</p>
                    <p class="card-text">Géneros: ${genres}</p>
                    <p class="card-text">Plataformas: ${platforms}</p>
                </div>
            </div>
        </div>
            `);
        }

        function obtenerJuegos(page) {
            $.ajax({
                url: `${URL}&page=${page}`,
                method: "GET",
                success: function(data) {
                    console.log("Página " + page + ":", data.results);
                    var juegos = data.results;
                    id_Games.empty(); // Limpiar juegos anteriores
                    juegos.forEach(addGames);
                },
                error: function(xhr, status, error) {
                    console.log("Error:", error);
                }
            });
        }

        function generarBotones(totalPages) {
            pagination.empty(); // Limpiar botones anteriores
            for (let i = 1; i <= totalPages; i++) {
                pagination.append(`<li class="page-item"><a class="page-link" href="#" data-page="${i}">${i}</a></li>`);
            }
        }

        // Obtener la cantidad total de páginas y generar botones
        $.ajax({
            url: `${URL}&page=1`,
            method: "GET",
            success: function(data) {
                const totalPages = Math.ceil(data.count / PAGE_SIZE);
                generarBotones(totalPages);
                obtenerJuegos(1); // Cargar la primera página automáticamente
            },
            error: function(xhr, status, error) {
                console.log("Error:", error);
            }
        });

        // Manejar el clic en los botones de paginación
        $(document).on("click", ".page-link", function(e) {
            e.preventDefault();
            const page = parseInt($(this).data("page"));
            obtenerJuegos(page);
        });
    });
</script>

</body>
</html>
